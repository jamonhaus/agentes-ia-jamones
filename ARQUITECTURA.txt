๐๏ธ  ARQUITECTURA DEL SISTEMA
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

                            ๐ CLIENTE
                          (Navegador/API)
                               โ
                               โ
                    โโโโโโโโโโโโโโโโโโโโโ
                    โ   FastAPI App     โ
                    โ  (main.py)        โ
                    โโโโโโโโโโโโโโโโโโโโโค
                    โ GET  /            โ
                    โ GET  /agents      โ
                    โ POST /execute/*   โ
                    โ GET  /history     โ
                    โ GET  /health      โ
                    โโโโโโโโโโฌโโโโโโโโโโโ
                             โ
                             โ
                    โโโโโโโโโโโโโโโโโโโโโโ
                    โ Orchestrator       โ
                    โ (agents/          โ
                    โ  orchestrator.py) โ
                    โโโโโโโโโโโโโโโโโโโโโโค
                    โ โข execute_simple   โ
                    โ โข execute_pipeline โ
                    โ โข execute_parallel โ
                    โ โข get_history      โ
                    โโโโโโโโโโฌโโโโโโโโโโโโ
                             โ
                             โ
                    โโโโโโโโโโโโโโโโโโโโโโ
                    โ AIAgentClient      โ
                    โ (shared/client.py) โ
                    โโโโโโโโโโโโโโโโโโโโโโค
                    โ โข call_agent       โ
                    โ โข call_workflow    โ
                    โโโโโโโโโโฌโโโโโโโโโโโโ
                             โ
                             โ
                   ๐ OpenAI API (GPT-4)
                             โ
                             โ
                    โโโโโโโโโโโโโโโโโโโโโโ
                    โ  AI AGENTS         โ
                    โโโโโโโโโโโโโโโโโโโโโโค
                    โ โข Analyst          โ
                    โ โข Processor        โ
                    โ โข Coordinator      โ
                    โโโโโโโโโโโโโโโโโโโโโโ


โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ฆ COMPONENTES
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ CAPA DE ENTRADA: FastAPI (main.py)                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ Responsabilidades:                                                          โ
โ โข Recibir requests HTTP                                                     โ
โ โข Validar entrada con Pydantic models                                       โ
โ โข Llamar al Orchestrator                                                    โ
โ โข Retornar responses JSON                                                   โ
โ โข Generar documentaciรณn Swagger                                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ CAPA DE ORQUESTACIรN: Orchestrator (agents/orchestrator.py)                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ Responsabilidades:                                                          โ
โ โข Coordinar llamadas a agentes                                              โ
โ โข Gestionar el flujo de datos entre agentes                                 โ
โ โข Mantener historial de ejecuciones                                         โ
โ โข Manejar errores y estados                                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ CAPA DE CLIENTE: AIAgentClient (shared/client.py)                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ Responsabilidades:                                                          โ
โ โข Comunicarse con OpenAI API                                                โ
โ โข Llamar agentes individuales                                               โ
โ โข Ejecutar workflows                                                        โ
โ โข Manejo de timeouts y reintentos                                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ CAPA DE CONFIGURACIรN: Config (config/config.py)                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ Responsabilidades:                                                          โ
โ โข Centralizar configuraciรณn                                                 โ
โ โข Gestionar variables de entorno                                            โ
โ โข Definir agentes disponibles                                               โ
โ โข Validar configuraciรณn al inicio                                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ CAPA DE DATOS: Models (shared/models.py)                                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ Responsabilidades:                                                          โ
โ โข Definir esquemas de peticiones                                            โ
โ โข Definir esquemas de respuestas                                            โ
โ โข Validar datos con Pydantic                                                โ
โ โข Type hints para mejor IDE support                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ


โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ FLUJOS DE EJECUCIรN
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

FLUJO 1: SIMPLE (1 Agente)
โโโโโโโโโโโโโโโโโโโโโโโโโโ

    User Request
         โ
         โ
    FastAPI Route
         โ
         โ
    Orchestrator.execute_simple_task()
         โ
         โ
    AIAgentClient.call_agent()
         โ
         โ
    OpenAI API
         โ
         โ
    Response
         โ
         โ
    Store in History
         โ
         โ
    Return to User


FLUJO 2: PIPELINE (3 Agentes Secuencial)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

    User Request
         โ
         โ
    FastAPI Route
         โ
         โ
    Orchestrator.execute_pipeline()
         โ
         โโโ Agent 1: Analyst
         โ        โ
         โ        โ
         โ    OpenAI API โ Response 1
         โ        โ
         โ        โ
         โโโ Agent 2: Processor (usa Response 1)
         โ        โ
         โ        โ
         โ    OpenAI API โ Response 2
         โ        โ
         โ        โ
         โโโ Agent 3: Coordinator (usa Response 2)
         โ        โ
         โ        โ
         โ    OpenAI API โ Response 3
         โ        โ
         โ        โ
    Combine Results
         โ
         โ
    Store in History
         โ
         โ
    Return to User


FLUJO 3: PARALELO (3 Agentes Simultรกneo)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

    User Request
         โ
         โ
    FastAPI Route
         โ
         โ
    Orchestrator.execute_parallel_analysis()
         โ
         โโโโโโโฌโโโโโโฌโโโโ
         โ     โ     โ
      Agent1  Agent2 Agent3
      (Analyst)(Proc)(Coord)
         โ     โ     โ
         โ     โ     โ
      OpenAI API (3 calls)
         โ     โ     โ
         โ     โ     โ
      Resp1  Resp2  Resp3
         โโโโโโโฌโโโโโโ
               โ
       Combine Results
               โ
       Store in History
               โ
       Return to User


โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ FLUJO DE DATOS
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

REQUEST TรPICA:
{
    "agent_id": "analyst",
    "prompt": "Tu pregunta aquรญ",
    "context": {}
}
         โ
         โ
    VALIDACIรN (Pydantic)
         โ
         โ
    PROCESAMIENTO
         โ
         โโโ AIAgentClient.call_agent()
         โ
         โโโ Preparar system prompt
         โ
         โโโ Llamar OpenAI
         โ
         โ
RESPONSE TรPICA:
{
    "agente": "analyst",
    "estado": "completed",
    "resultado": "Respuesta del agente...",
    "timestamp": "2025-11-12T20:30:00"
}


โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ SEGURIDAD Y VALIDACIรN
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโ
โ  User Input         โ
โโโโโโโโโโโโโโฌโโโโโโโโโ
             โ
             โ
    โโโโโโโโโโโโโโโโโโโโโโ
    โ PYDANTIC Validationโ
    โ โข Type checking    โ
    โ โข Required fields  โ
    โ โข Length limits    โ
    โโโโโโโโโโโโโโฌโโโโโโโโ
                 โ
                 โ
    โโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ Configuration Validate โ
    โ โข Check API Key        โ
    โ โข Check Agent ID       โ
    โโโโโโโโโโโโโโฌโโโโโโโโโโโโ
                 โ
                 โ
    โโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ Execution             โ
    โ โข Try/Except blocks   โ
    โ โข Error handling      โ
    โ โข Retry logic         โ
    โโโโโโโโโโโโโโฌโโโโโโโโโโโโ
                 โ
                 โ
        Safe to User


โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ ESCALABILIDAD
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

ACTUAL (Monolรญtico)
โโโโโโโโโโโโโโโโโโ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ      FastAPI Server         โ
โ  โข API + Orchestrator       โ
โ  โข Cliente OpenAI           โ
โ  โข Configuraciรณn            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

FUTURO (Microservicios)
โโโโโโโโโโโโโโโโโโโโโโ
โโโโโโโโโโโโโโโโ
โ   API        โ โ FastAPI
โโโโโโโโโโโโโโโโค
โ Orchestrator โ โ Servicio separado
โโโโโโโโโโโโโโโโค
โ  Agents      โ โ Worker services
โโโโโโโโโโโโโโโโ

Para escalar:
1. Separar Orchestrator en su propio servicio
2. Usar colas de mensajes (Redis, RabbitMQ)
3. Workers para cada agente
4. Load balancer

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ DEBUGGING Y MONITOREO
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

PUNTO DE ENTRADA:
    main.py โ FastAPI routes

LOGS:
    logs/execution_history.json โ Historial completo

ENDPOINTS DEBUG:
    GET /history โ Ver ejecuciones pasadas
    GET /health โ Verificar salud

CรDIGO DEBUG:
    โข Docstrings en cada funciรณn
    โข Type hints completos
    โข Exception handling explรญcito
    โข Timestamp en cada ejecuciรณn


โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
